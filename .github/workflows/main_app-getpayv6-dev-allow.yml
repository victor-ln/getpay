#!/bin/bash

cd /home/site/wwwroot

# Instala dependências se necessário
if [ ! -f "vendor/autoload.php" ]; then
    composer install --no-dev --optimize-autoloader
fi

# Limpa caches
php artisan config:clear
php artisan route:clear
php artisan view:clear

# Recria cache
php artisan config:cache

# Cria diretórios necessários
mkdir -p storage/logs
mkdir -p storage/framework/cache
mkdir -p storage/framework/sessions
mkdir -p storage/framework/views
mkdir -p bootstrap/cache

echo "Startup concluído."